<div class="mat-dialog-focus-trap"></div>
<div mat-dialog-content class="dialog-container" style="padding: 20px 50px !important;">
	<div class="row">
		<div class="position-relative step-1" [hidden]="step!=1">
			<form [formGroup]="phoneForm">
				<div class="col-md-12 center">
					<div class="verification-box drop-shadow">
						<h2 class="headline">Confirm your phone number</h2>
						<p class="description1 margin-bottom-10">This is so teachers can contact you when to sign up for a class or experience.</p>
						<button class="mat-fab roundFab col-md-offset-5 margin-bottom-10" type="button">
							<i class="fas fa-mobile-alt fa-3x" style="color:#FF5B5F" aria-hidden="true"></i>
						</button>
						<mat-form-field class="pb-block margin-top-20" [floatLabel]="'auto'">
							<input type="text" matInput formControlName="countryCode" [matAutocomplete]="auto" placeholder="Country " />
							<mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
								<mat-option *ngFor="let country of filteredCountryCodes | async" [value]="country">{{country.country}}</mat-option>
							</mat-autocomplete>
						</mat-form-field>
						<mat-form-field [floatLabel]="'auto'" class="pb-block margin-top-20">
							<input type="number" matInput #phone formControlName="phone" placeholder="Phone Number" />
						</mat-form-field>
						<div *ngIf="phoneFormError" style="color:red;">{{phoneFormError}}</div>
					</div>
				</div>
				<div class="col-sm-12">
					<div class="col-md-12 bottom-section clearfix">
						<div>
							<span matTooltip="Please enter a valid phone number" [matTooltipDisabled]="phoneForm.valid">
								<button class="pb-block" mat-raised-button color="accent" (click)="continue(2)" [disabled]="!phoneForm.valid || httpLoading">Confirm Phone Number</button>
							</span>
						</div>
					</div>
				</div>
				<div class="col-sm-12 center margin-top-20">
					<a class="mat-caption" href="javascript:void(0)" (click)="skipOnboarding()">
						I'll do this later
					</a>
				</div>
			</form>
		</div>
		<div class="position-relative step-2" [hidden]="step!=2">
			<form [formGroup]="phoneOtp">
				<div class="col-md-12 center">
					<div class="verification-box drop-shadow">
						<h2 class="headline">Enter the code sent to your phone</h2>
						<p class="description1 margin-bottom-10">We have sent 6 digit code to {{phone.value}}. Please enter this code to verify your phone number.</p>
						<button class="mat-fab roundFab col-md-offset-5 margin-bottom-10" type="button">
							<i class="fa fa-key fa-3x" style="color:#FF5B5F" aria-hidden="true"></i>
						</button>
						<mat-form-field [floatLabel]="'auto'" class="pb-block margin-bottom-10">
							<input type="text" matInput #inputPhoneOTP formControlName="inputOTP" />
						</mat-form-field>
						<div *ngIf="phoneOtpError" style="color:red;">{{phoneOtpError}}</div>
						<div>
							<p class="description1">
								<a (click)="resendPhoneOTP()" style="cursor: pointer;">Resend code?</a> Please wait at least 5 minutes before
								<br/> requesting another code or
								<a style="cursor: pointer;" (click)="continue(1, true)">change your phone number</a>
							</p>
						</div>
					</div>
				</div>
				<div class="col-sm-12">
					<div class="col-md-12 bottom-section clearfix">
						<div>
							<span matTooltip="Please enter a valid code" [matTooltipDisabled]="inputPhoneOTP.value.length === 6">
								<button class="pb-block" mat-raised-button color="accent" (click)="continue(3)" [disabled]="inputPhoneOTP.value.length !== 6 || httpLoading">Verify Phone</button>
							</span>
						</div>
					</div>
				</div>
				<div class="col-sm-12 center margin-top-20">
					<a class="mat-caption" href="javascript:void(0)" (click)="skipOnboarding()">
						I'll do this later
					</a>
				</div>
			</form>
		</div>
		<!-- step 2 ends -->
		<div class="position-relative step-3" [hidden]="step!=3">
			<form [formGroup]="emailForm">
				<div class="col-md-12">
					<div class="verification-box drop-shadow">
						<button class="mat-fab roundFab col-md-offset-5 margin-bottom-40" type="button">
							<i class="fa fa-envelope-o fa-3x" style="color:#FF5B5F" aria-hidden="true"></i>
						</button>
						<h2 class="headline">Verify your email address</h2>
						<p class="description1 margin-bottom-40">Please let us know how can we reach you by email. To help keep your peerbuds account secure, make sure only you can
						                                         log into this email address.</p>
						<mat-form-field [floatLabel]="'auto'" style="width:50% !important" class="pb-block margin-bottom-60 margin-top-20">
							<input type="email" matInput #email formControlName="email" placeholder="Email Address" />
						</mat-form-field>
					</div>
				</div>
				<div class="col-sm-12">
					<div class="col-md-12 bottom-section clearfix">
						<div class="pull-right">
							<span matTooltip="Please enter a valid email ID" [matTooltipDisabled]="!emailForm.controls.email.invalid || !emailForm.controls.email.dirty && emailForm.value.length !== 0">
								<button mat-raised-button color="accent" (click)="continue(4)" [disabled]="(emailForm.controls['email'].invalid && emailForm.controls['email'].dirty) || email.value.length === 0  || httpLoading">Send Code</button>
							</span>
						</div>
					</div>
				</div>
			</form>
		</div>
		<!-- step 3 ends -->
		<div class="position-relative step-4" [hidden]="step!=4">
			<form [formGroup]="emailOtp">
				<div class="col-md-12 position-relative">
					<div class="verification-box drop-shadow">
						<button class="mat-fab roundFab col-md-offset-5 margin-bottom-40" type="button">
							<i class="fa fa-key fa-3x" style="color:#FF5B5F" aria-hidden="true"></i>
						</button>
						<h2 class="headline">Enter the code sent to your email</h2>
						<p class="description1 margin-bottom-40">We have sent a 6 digit code to {{email.value}}. Please enter this code to verify your email address. Users on peerbuds
						                                         need to verify their email IDs to receive notifications and updates from the platform.</p>
						
						<mat-form-field [floatLabel]="'auto'" style="width:20% !important" class="margin-bottom-10">
							<input type="text" matInput #inputEmailOTP formControlName="inputOTP" />
						</mat-form-field>
						<div *ngIf="emailOtpError" style="color:red;">{{emailOtpError}}</div>
						<div>
							<p class="description1">
								<a (click)="resendEmailOTP()" style="cursor: pointer;">Resend code</a>. Please wait at least 5 minutes before
								<br/> requesting another code or
								<a style="cursor: pointer;" (click)="continue(3, true)">change your email</a>
							</p>
						</div>
					</div>
				</div>
				<div class="col-sm-12">
					<div class="col-md-12 bottom-section clearfix">
						<div class="pull-right">
							<span matTooltip="Please enter a valid code" [matTooltipDisabled]="inputEmailOTP.value.length === 6">
								<button mat-raised-button color="accent" (click)="continue(5)" [disabled]="inputEmailOTP.value.length !== 6 || httpLoading">Verify Email</button>
							</span>
						</div>
					</div>
				</div>
			</form>
		</div>
		<!-- step 4 ends -->
	</div>
</div>
