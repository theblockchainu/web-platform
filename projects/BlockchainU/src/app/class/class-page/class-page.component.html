<div class="main-content">
	<div class="row" [hidden]="!loadingClass">
		<div class="col-xs-2 col-xs-offset-1">
			<div class="loading-container">
				<ngx-loading [show]="true"></ngx-loading>
			</div>
		</div>
	</div>
	<div *ngIf="class" class="classPageContainer">
		<div class="row pending-actions" *ngIf="class.status === 'cancelled' && userType==='teacher' ">
			<div class="col-md-10 col-md-offset-1">
				<span>This course has been cancelled by the teacher</span>
			</div>
		</div>
		<div class="row pending-actions center" *ngIf="class.status === 'submitted' && userType==='teacher' ">
			<div class="col-md-10 col-md-offset-1">
				<span>This course is pending approval from Blockchain University team</span>
			</div>
		</div>
		<div class="row pending-actions center" *ngIf="(class.status === 'draft' || class.status === '' ) && previewAs ">
			<div class="col-md-10 col-md-offset-1">
				<span>You are previewing as
					<b>{{previewAs | titlecase}}</b>
					. Submit your course to get it approved.
					<a class="clickable" (click)="_collectionService.openEditCollection(class)">Continue editing?</a>
				</span>
			</div>
		</div>
		<div class="row pending-actions center" *ngIf="(calendarId !== undefined && class.status === 'active' && !hasCohortEnded() )">
			<div class="col-md-10 col-md-offset-1">
				<span>This cohort has ended. You can still add a review and participate in discussions</span>
			</div>
		</div>
		<div class="row pending-actions center" *ngIf="(class && class.assessment_models && class.assessment_models.length>0 && class.assessment_models[0].type && userType === class.assessment_models[0].type.toLowerCase())">
			<div class="col-md-10 col-md-offset-1">
				<span class="mat-body-2">
					<a href="javascript:void(0);" (click)="openAssessmentDialog()">Assess your students and issue Smart Certificates</a>
				</span>
			</div>
		</div>
		<div class="row upcoming-actions center" *ngIf="(class.status === 'active' && calendarId === undefined && hasLiveCohort() && userType === 'teacher')">
			<div class="col-md-10 col-md-offset-1">
				<span>The cohort of
					<b>{{liveCohort.startDate | date: 'MMM, dd'}} to {{liveCohort.endDate | date: 'MMM, dd'}}</b> is currently
					underway.
					<a href="javascript:void(0);" (click)="viewDetails(liveCohort.id)">View details</a>
				</span>
			</div>
		</div>
		<div class="row pending-actions center" *ngIf="class.status === 'active' && calendarId === undefined && !hasUpcomingCohort()">
			<div class="col-md-10 col-md-offset-1">
				<span>This online course was run in the past but has no upcoming batches.
					<span class="clickable mat-body-2" (click)="followCollectionToggle()" style="padding-left: 15px;" matTooltip="{{ isFollowing?'You will be':'Get' }} notified whenever a new cohort is added for this {{class.type | titlecase}}">
						&emsp; <i [class]="'fa-bell fa' + (isFollowing ? 's' : 'r')"></i> Get notified of upcoming cohorts
					</span>
					<a href="javascript:void(0);" *ngIf="userType === 'teacher'" (click)="editCalendar()">Schedule one now?</a>
				</span>
			</div>
		</div>
		<div class="row pending-actions center" *ngIf="calendarId !== undefined && currentCalendar !== undefined && currentCalendar.status === 'cancelled'">
			<div class="col-md-10 col-md-offset-1">
				<span>This cohort was cancelled by the teacher.
					<a href="javascript:void(0);" (click)="selectJoiningDates()">View other cohorts?</a>
				</span>
			</div>
		</div>
		<div class="row pending-actions center" *ngIf="(userType === 'public' && userId !== undefined && userId.length > 5 && accountApproved !== 'true')">
			<div class="col-md-10 col-md-offset-1">
				<span>Your account is still under review. You can sign-up for this course after you are approved.
					<a href="javascript:void(0);" (click)="openVerificationPage()">Check verification status</a>
				</span>
			</div>
		</div>
		<div class="row pending-actions center" *ngIf="(userId === undefined)">
			<div class="col-md-10 col-md-offset-1">
				<span>You need to login or sign-up to start taking this course.
					<a href="javascript:void(0);" (click)="openLoginPage()">Login now</a>
				</span>
			</div>
		</div>

		<div class="row margin-top-40">
			<div class="col-md-10 col-md-offset-1">
				<div class="row class-header">
					<div class="col-md-7">
						<div class="row">
							<div class="col-md-10">
								<a class="clickable margin-bottom-10" *ngIf="calendarId && userType !== 'participant'" (click)="backToCollection(class)">
									< Back to course page </a> <p class="mat-display-1" style="margin-bottom: 20px !important;">{{class.title |
										titlecase}}
										<span *ngIf="calendarId && userType !== 'participant'">(Cohort View)</span>
										<span *ngIf="!checkingEthereum && isOnEthereum  && userType === 'teacher' && !previewAs" matTooltip="one0x Compliant"
										 style="padding-left: 15px; position: relative; top: -7px;">&emsp;
											<i class="fa fa-globe" style="color: #ff6d71; font-size: 14px;"></i>
										</span>
										<span *ngIf="!checkingEthereum && !isOnEthereum  && userType === 'teacher' && !previewAs" matTooltip="Add to one0x Blockchain"
										 (click)="addToEthereum()" class="clickable" style="padding-left: 15px; position: relative; top: -7px;">&emsp;
											<i class="fa fa-plus lighterText" style="font-size: 14px;"></i>
										</span>
										</p>
										<div *ngIf="userType==='teacher' || userType==='participant'" style="margin-top: -12px; margin-bottom: 10px;">
											<span *ngIf="currentCalendar">
												<b>{{currentCalendar.startDate | date:'d MMM'}} to {{currentCalendar.endDate| date:'d MMM'}}</b>
												&nbsp;&nbsp;&nbsp;
												<mat-icon style="font-size: 5px; top: -2px; height: 20px; width: 12px;">fiber_manual_record</mat-icon>
											</span>
											<span> {{totalDuration | i18nPlural : hourMapping}} {{class.type}} &nbsp;&nbsp;&nbsp;
												<mat-icon style="font-size: 5px; top: -2px; height: 20px; width: 12px;">fiber_manual_record</mat-icon>{{class.contents.length
												| i18nPlural : activityMapping}} &nbsp;&nbsp;&nbsp;</span>
											<span *ngIf="userType==='teacher'">
												<mat-icon style="font-size: 5px; top: -2px; height: 20px; width: 12px;">fiber_manual_record</mat-icon>{{class.calendars.length
												| i18nPlural : cohortMapping}} &nbsp;&nbsp;&nbsp;
											</span>
											<a href="javascript:void(0)" *ngIf="userType==='teacher' && calendarId !== undefined" (click)="changeDates()">
												<br />
												<mat-icon style="top: 5px;">date_range</mat-icon> Change cohort
											</a>
											<a href="javascript:void(0)" *ngIf="userType==='teacher' && calendarId === undefined" (click)="changeDates()">
												<br />
												<mat-icon style="top: 5px;">date_range</mat-icon> Select cohort to view participants
											</a>
										</div>
										<div *ngIf="userType==='public'" style="margin-top: -12px;">
											<span>{{itenaryArray.length | i18nPlural : dayMapping}} / {{totalDuration | i18nPlural : hourMapping}}
												&nbsp;&nbsp;&nbsp;
												<mat-icon style="font-size: 5px;  top: -2px; height: 20px; width: 12px;">fiber_manual_record</mat-icon>
												{{class.contents.length | i18nPlural : activityMapping}}
												<span matTooltip="{{allParticipants ? allParticipants.length : '0'}} Participants" *ngIf="allParticipants && allParticipants.length > 0">
													&nbsp;&nbsp;&nbsp;
													<mat-icon style="font-size: 5px;  top: -2px; height: 20px; width: 12px;">fiber_manual_record</mat-icon>
													<i class="fa fa-group lightText" style="margin-left: 10px; margin-right: 10px;"></i> {{allParticipants ?
													allParticipants.length : '0'}}
												</span>
												<span matTooltip="{{class.views ? class.views.length : '0'}} Views" *ngIf="class.views && class.views.length > 0">
													&nbsp;&nbsp;&nbsp;
													<mat-icon style="font-size: 5px;  top: -2px; height: 20px; width: 12px;">fiber_manual_record</mat-icon>
													<i class="fa fa-eye lightText" style="margin-left: 10px; margin-right: 10px;"></i> {{class.views ?
													class.views.length : '0'}}
												</span>
											</span>
										</div>
							</div>
							<div class="col-md-2 clickable lighterText" style="font-size: 20px; top: 5px; text-align: right;" *ngIf="userType === 'public'">
								<span style="margin-right: 15px;" (click)="saveBookmark()">
									<ngx-loading [show]="bookmarking"></ngx-loading>
									<span [hidden]="bookmarking">
										<i [ngClass]="{'fa': true, 'fa-bookmark': true, 'hasBookmarked': hasBookmarked}"></i>
									</span>
								</span>
								<span (click)="openShareDialog()">
									<i class="fa fa-share"></i>
								</span>
							</div>
						</div>
					</div>
					<div class="col-md-5">
						<div class="row" style="margin-top: 15px; text-align: right" *ngIf="userType==='teacher' || userType==='participant'">
							<div class="col-xs-12 button-row">
								<button mat-button class="mat-border-button" (click)="openGroupChat()">Group Chat</button>
								<button mat-button class="mat-border-button" *ngIf="userType ==='participant' || userType === 'teacher'"
								 (click)="scrollToDiscussion()">Discussion</button>
								<button mat-button class="mat-border-button" *ngIf="userType==='teacher'" (click)="gotoEdit()">Edit</button>
								<mat-icon *ngIf="class.status !== 'cancelled'" [matMenuTriggerFor]="menu" style="cursor: pointer;top: 5px; color: #ccc;">more_vert</mat-icon>
							</div>
							<mat-menu #menu="matMenu">
								<button mat-menu-item *ngIf="userType==='participant' && currentCalendar !== undefined && isCancelable()"
								 (click)="dropOutClass()">Cancel
									Participation
								</button>
								<button mat-menu-item *ngIf="userType==='teacher' && calendarId === undefined && allParticipants.length === 0"
								 (click)="deleteClass()">Delete Course
								</button>
								<button mat-menu-item *ngIf="userType==='teacher' && calendarId === undefined && allParticipants.length > 0"
								 (click)="cancelClass()">Cancel
									Course
								</button>
								<button mat-menu-item *ngIf="userType==='teacher' && calendarId !== undefined" (click)=" addParticipant()">Add
									participant
								</button>
								<button mat-menu-item *ngIf="userType==='teacher' && calendarId !== undefined && participants.length === 0"
								 (click)=" deleteCohort()">Delete
									Cohort
								</button>
								<button mat-menu-item *ngIf="userType==='teacher' && calendarId !== undefined && participants.length >= 0 && currentCalendar.status !== 'cancelled'"
								 (click)=" cancelCohort()">Cancel Cohort</button>
							</mat-menu>
						</div>
					</div>
				</div>
				<hr *ngIf="userType !== 'public'" class="expHeaderHrParticipant">
				<hr *ngIf="userType === 'public'" class="expHeaderHrPublic">
				<div class="row class-content">
					<div class="col-md-7 left-content">
						<!--ABOUT SECTION-->
						<div class="row About" *ngIf="calendarId === undefined && (userType === 'public')">
							<div class="col-xs-4">
								<h3 *ngIf="userType === 'public'">What we'll do</h3>
							</div>
							<div class="col-xs-8">
								<div class="row" *ngIf="userType === 'public'">
									<div class="col-md-12">
										<mat-icon style="top: 7px; margin-right: 15px;">schedule</mat-icon>&emsp;
										<span>{{totalDuration | i18nPlural : hourMapping}} total</span>
									</div>
									<div class="col-md-12 margin-top-10">
										<mat-icon style="top: 7px; margin-right: 15px;">mic</mat-icon>&emsp;
										<span>Offered in {{class.language[0]}}</span>
									</div>
									<div class="col-md-12 margin-top-10">
										<mat-icon style="top: 7px; margin-right: 15px;">dvr</mat-icon>&emsp;
										<span>{{getContentCount('project') | i18nPlural : projectMapping}}</span>
									</div>
									<div class="col-md-12 margin-top-10">
										<mat-icon style="top: 7px; margin-right: 15px;">live_tv</mat-icon>&emsp;
										<span>{{getContentCount('online') | i18nPlural : onlineSessionMapping}}</span>
									</div>
								</div>
							</div>
						</div>
						<!--TOPICS SECTION-->
						<div class="row Topics margin-top-20" *ngIf="userType === 'public'">
							<div class="col-xs-8 col-xs-offset-4">
								<mat-chip-list>
									<mat-chip *ngFor="let topic of topicFix" disabled> {{topic.name | titlecase}} </mat-chip>
								</mat-chip-list>
							</div>
						</div>
						<div class="row margin-top-40 upcomingCohortBox" *ngIf="userType === 'public' && class.subCategory === 'instructor led' && _collectionService.getUpcomingCalendar(experience.calendars)">
							<div class="col-md-1 col-xs-1">
								<i class="fa fa-info-circle lightText"></i>
							</div>
							<div class="col-md-8 col-xs-8">
								Next cohort starts
								{{_collectionService.getDaysBetween(_collectionService.getUpcomingCalendar(class.calendars).startDate,
								today)}}
								<br>
								<b>{{_collectionService.getUpcomingCalendar(class.calendars).startDate | extractTime:'Do MMMM YY'}}</b> -
								<b>{{_collectionService.getUpcomingCalendar(class.calendars).endDate | extractTime:'Do MMMM YY'}}</b>
							</div>
							<div class="col-md-3 col-xs-3" style="text-align: right">
								<button mat-button class="mat-border-button" (click)="selectJoiningDates()">View Dates</button>
							</div>
						</div>
						<div *ngIf="userType==='public'" class="row Description margin-top-20 pre-wrapped">
							<div class="col-xs-4">
								<h3 *ngIf="userType === 'public'">Course overview</h3>
							</div>
							<div class="col-xs-8">
								<div>
									<td-markdown [content]="class.description | shorten: maxLength : '...'"></td-markdown>
									<span class="clickable" *ngIf="class.description && class.description.length > maxLength" (click)="showAll(class.description.length)"
									 style="color:#33bd9e">read more</span>
									<span class="clickable" *ngIf="class.description && class.description.length >140 && class.description.length <= maxLength"
									 (click)="showAll(class.description.length)" style="color:#33bd9e">show less</span>
								</div>
							</div>
						</div>
						<div class="row Progress margin-top-20" *ngIf="calendarId !== undefined && (userType === 'teacher' || userType === 'participant')">
							<div class="col-xs-4">
								<h3 *ngIf="userType==='participant' && loggedInUser !== undefined">Welcome back,
									{{loggedInUser.profiles[0].first_name}}</h3>
								<h3 *ngIf="userType==='teacher'">Welcome back, {{class.owners[0].profiles[0].first_name}}</h3>
							</div>
							<div class="col-xs-8">
								<div *ngIf="userType==='participant'" style="margin-top: 5px;">As you complete any activity, your progress and
									updates
									will show up here.</div>
								<div *ngIf="userType==='teacher'" style="margin-top: 5px;">As your students complete any activity, their
									progress
									and updates will show up here.</div>
							</div>
						</div>
						<hr *ngIf="calendarId !== undefined || userType === 'public'">
						<!--Description of class-->
						<div class="row Description" *ngIf="userType==='public'">
							<div class="col-md-12">
								<div class="row">
									<div class="col-xs-4">
										<h3>Taught by</h3>
									</div>
									<div class="col-xs-8">
										<div class="row">
											<div class="col-md-12">
												<div class="clickable" style="display: inline-block; position: relative; top: 2px; vertical-align: top;">
													<app-profile-popup [peer]="class.owners[0]"></app-profile-popup>
												</div>
												<div style="display: inline-block; margin-left: 10px; width: 85%;">
													<div class="row">
														<div class="col-md-12 clickable" (click)="openProfilePage(class.owners[0].id)">
															<span *ngIf="class.owners[0].profiles[0].first_name !== undefined">
																{{class.owners[0].profiles[0].first_name | titlecase }} {{class.owners[0].profiles[0].last_name |
																titlecase }}
															</span>
															<span *ngIf="class.owners[0].profiles[0].first_name === undefined">
																John Doe
															</span>
														</div>
														<div class="col-md-12 mat-h5" *ngIf="class.owners[0].profiles[0].headline">
															{{class.owners[0].profiles[0].headline}}
														</div>
														<div class="col-md-12 mat-h5" *ngIf="!class.owners[0].profiles[0].headline">
															New user
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<p class="pre-wrapped">{{class.aboutHost}}</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<hr *ngIf="userType==='public'">
						<div class="row" *ngIf="userType === 'public'">
							<div class="col-md-12">
								<div class="row">
									<div class="col-xs-4">
										<h3>
											Need to know
										</h3>
									</div>
									<div class="col-xs-8 margin-top-8">
										{{class.difficultyLevel}} level
										<div class="mat-caption pre-wrapped" [innerHTML]="class.notes | linkify "></div>
									</div>
								</div>
								<div class="row margin-top-10">
									<div class="col-xs-4">
										<h3>Cancellation policy</h3>
									</div>
									<div class="col-xs-8 margin-top-10">
										<p>Get a full refund if you cancel within {{class.cancellationPolicy}} of signing up.</p>
									</div>
								</div>
							</div>
						</div>
						<hr *ngIf="userType === 'public'">
						<!--TIMELINE-->
						<div class="row Itenary">
							<div class="featurette" id="about">
								<div class="col-md-12">
									<div class="mat-h3 margin-bottom-20">
										Itinerary
									</div>
									<div class="qa-message-list" id="wallmessages">
										<div [ngClass]="{'message-item-wrapper' : oneDay(), 'message-item-wrapper-one-day': !oneDay()}" *ngFor="let itenary of itenaryArray">
											<div [ngClass]="{'message-item': oneDay() , 'message-item-ticked': hasDatePassed(itenary.startDate)}">
												<div class="message-inner">
													<div class="qa-message-content">
														<div style="top: -5px; position: relative;">
															<div *ngIf="(userType==='teacher' || userType==='participant') && calendarId !== undefined">
																{{itenary.startDate | date:'EEEE, d MMMM'}} </div>
															<div *ngIf="(userType==='public'|| calendarId === undefined) && itenaryArray.length > 1">{{add1ToIndex(itenary.startDay)}}</div>
															<div *ngIf="(userType==='public'|| calendarId === undefined) && itenaryArray.length == 1">{{itenary.startDate | date:'EEEE, d MMMM'}}</div>
														</div>
														<div (mouseover)="showViewTime(content)" (mouseout)="hideViewTime(content)" [ngClass]="{'row':true, 'timelineRowItem': true, 'timeRowItemProgress': content.views !== undefined && content.views.length > 0 && userType === 'participant'}"
														 *ngFor="let content of itenary.contents">
															<div class="viewTime" *ngIf="content.totalUserViewTime !== undefined" [hidden]="content.isViewTimeHidden">
																{{content.totalUserViewTime}}
															</div>
															<a style="cursor:pointer;color:rgba(0,0,0,0.87)" (click)="openDialog(content, itenary.startDate, itenary.endDate)">
																<div class="col-md-5">
																	<img style="width: auto; border: 0.5px solid #eee;" *ngIf="content.type!=='video' && content.type !== 'quiz'" class="img-responsive itenary-media"
																	 src="{{envVariable.apiUrl+content.imageUrl}}/300" (error)="_collectionService.imgErrorHandler($event)">
																	<video #videoContent width="100%" height="auto" *ngIf="content.type==='video' && !content.youtubeId"
																	 class="itenary-media" preload="metadata" (error)="_collectionService.imgErrorHandler($event)">
																		<source src="{{envVariable.apiUrl+content.imageUrl}}">
																	</video>
																	<img *ngIf="content.type === 'quiz'" style="width: auto; border: 0.5px solid #eee;" class="img-responsive itenary-media" src="/assets/images/community-banner-bg.jpg">
																	<img style="width: auto; border: 0.5px solid #eee;" *ngIf="content.type==='video' && content.youtubeId"
																	 class="img-responsive itenary-media" [src]="'https://img.youtube.com/vi/'+content.youtubeId+'/0.jpg'| safe:'resourceUrl'"
																	 (error)="_collectionService.imgErrorHandler($event)">
																</div>
															</a>
															<div class="col-md-7">
																<a style="cursor:pointer;color:rgba(0,0,0,0.87)" (click)="openDialog(content, itenary.startDate, itenary.endDate)">
																	<div class="row">
																		<div class="col-md-12">
																			<h3> {{content.title | titlecase}}</h3>
																			<div>
																				<span class="mat-caption" *ngIf="content.schedules[0].startTime !== undefined && (content.type === 'online' || (content.isTimeBound && content.type === 'quiz'))">
																					{{content.schedules[0].startTime | date: 'h:mm a'}} - {{content.schedules[0].endTime | date: 'h:mm a'}} &nbsp;&nbsp;&nbsp;
																					<mat-icon style="font-size: 5px; top: -2px; height: 20px; width: 12px;">fiber_manual_record</mat-icon>
																				</span>
																				{{_collectionService.getContentTypeFullName(content.type) | titlecase}}
																			</div>
																		</div>
																		<div *ngIf="content.type === 'quiz' && content.questions" class="col-md-12 margin-top-10 textJustify">
																			<span class="pre-wrapped">{{content.questions.length}} Questions</span>
																		</div>
																		<div *ngIf="userType === 'public' || (content.type !== 'online' && content.type !== 'quiz')" class="col-md-12 margin-top-10 textJustify">
																			<span class="pre-wrapped">{{content.description | shorten: 115 : '...'}}</span>
																		</div>
																	</div>
																</a>
																<div class="row margin-top-10" *ngIf="content.type==='online' && (userType==='teacher' || userType==='participant') && calendarId">
																	<div class="col-md-12">
																		<a mat-button *ngIf="isLive(content)" class="mat-border-button" (click)="joinLiveSession(content)">Join</a>
																		<button mat-button class="mat-border-button" *ngIf="!isLive(content)" [disabled]="true">{{content.timetoSession}}</button>
																	</div>
																</div>
																<div class="row margin-top-10">
																	<div class="col-md-12" *ngIf="userType !=='participant' && userType !== 'teacher'">
																		<a href="javascript:void(0);" (click)="openDialog(content, itenary.startDate, itenary.endDate)">See details</a>
																	</div>
																</div>
															</div>
															<!-- </div> -->
															<br>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div id="discussionTarget" #discussionTarget></div>
						<hr class="margin-top-80 margin-bottom-40">
						<!--DISCUSSION THREAD-->
						<div class="row Discussion" *ngIf="userType==='teacher' || userType==='participant'">
							<div class="col-md-12 margin-bottom-20">
								<h3 *ngIf="comments !== undefined">Discussion ({{comments.length}})</h3>
								<h3 *ngIf="comments === undefined">Discussion (0)</h3>
								<form [formGroup]="chatForm" (ngSubmit)="postComment()">
									<mat-form-field class="full-width margin-top-10 margin-bottom-10">
										<input matInput type="text" #description1 maxlength="2000" formControlName="description" placeholder="Post your thoughts on this course">
										<mat-hint align="end">{{description1.value.length}} / 2000</mat-hint>
									</mat-form-field>
									<mat-checkbox [formControlName]="'isAnnouncement'" *ngIf="userType==='teacher'">Make Announcement</mat-checkbox>
									<button mat-raised-button color="primary" [disabled]="!chatForm.valid" class="pull-right">
										<span *ngIf="!busyDiscussion">Post</span>
										<span *ngIf="busyDiscussion"> </span>
										<ngx-loading [show]="busyDiscussion"></ngx-loading>
									</button>
								</form>
							</div>
							<div class="loading-container" [hidden]="!loadingComments && !initialLoad">
								<ngx-loading [show]="true"></ngx-loading>
							</div>
							<div class="col-md-12">
								<div class="row lighterText" *ngIf="comments !== undefined && comments.length === 0">
									<div class="col-md-12">
										<div class="emptySectionText">Be the first one to start a discussion on this course..</div>
									</div>
								</div>
								<div class="row" *ngFor="let comment of comments">
									<div *ngIf="comment.isAnnouncement === true">
										<div class="announcement">
											<button *ngIf="userType !== 'public'" mat-icon-button [matMenuTriggerFor]="menuComment" style="float: right;">
												<mat-icon style="color: #cccccc">more_vert</mat-icon>
											</button>
											<mat-menu #menuComment="matMenu">
												<button *ngIf="userType==='participant' && !isMyComment(comment)" mat-menu-item>
													<mat-icon>flag</mat-icon>
													<span>Flag</span>
												</button>
												<button *ngIf="userType==='teacher' || isMyComment(comment)" mat-menu-item (click)="deleteComment(comment)">
													<mat-icon>delete</mat-icon>
													<span>Delete</span>
												</button>
											</mat-menu>
											<div class="margin-bottom-10">
												<b>Announcement on {{comment.createdAt | extractTime: 'Do MMM, YYYY'}}</b>
											</div>
											<div [innerHTML]="comment.description | linkify "></div>
										</div>
									</div>
								</div>
								<div class="margin-top-30"></div>
								<div class="row margin-top-10" *ngFor="let comment of comments">
									<div *ngIf="!comment.isAnnouncement">
										<div class="col-xs-1 margin-top-10" style="text-align: center; color: #cccccc;" [ngClass]="{'hasUpvoted': !!hasUpvoted(comment.upvotes)}">
											<mat-icon *ngIf="!hasUpvoted(comment.upvotes)" style="cursor: pointer; font-size: 38px; left: -7px;" (click)="addCommentUpvote(comment)">arrow_drop_up</mat-icon>
											<mat-icon *ngIf="hasUpvoted(comment.upvotes)" style="font-size: 38px; left: -7px;">arrow_drop_up</mat-icon>
											<div class="commentUpvoteCount">
												{{comment.upvotes.length}}
											</div>
										</div>
										<div class="col-xs-11 commentContainer">
											<div class="row" *ngIf="!editCommentForm || (editCommentForm && editCommentForm.value['id']!==comment.id)">
												<button *ngIf="userType !== 'public'" mat-icon-button [matMenuTriggerFor]="menuComment" style="float: right; margin-right: 15px; margin-top: 15px;">
													<mat-icon style="color: #cccccc">more_vert</mat-icon>
												</button>
												<mat-menu #menuComment="matMenu">
													<button *ngIf="userType==='participant'" mat-menu-item>
														<mat-icon>flag</mat-icon>
														<span>Flag</span>
													</button>
													<button *ngIf="userType==='teacher' || isMyComment(comment)" mat-menu-item (click)="deleteComment(comment)">
														<mat-icon>delete</mat-icon>
														<span>Delete</span>
													</button>
													<button *ngIf="isMyComment(comment)" mat-menu-item (click)="editComment(comment)">
														<mat-icon>edit</mat-icon>
														<span>Edit</span>
													</button>
												</mat-menu>
												<div class="mat-body-1 pre-wrapped">
													<div [innerHTML]=" comment.description | linkify "></div>
												</div>
												<div style="margin-top: 10px;" class="" *ngIf="comment.peer.length>0">
													<div class="clickable commentProfilePic">
														<img (click)="openProfilePage(comment.peer[0].id)" *ngIf="!comment.peer[0].profiles[0].picture_url" src="/assets/images/user-placeholder.jpg"
														 alt="A" class="circle-thumb margin-top-5">
														<img (click)="openProfilePage(comment.peer[0].id)" *ngIf="comment.peer[0].profiles[0].picture_url" src="{{envVariable.apiUrl+ comment.peer[0].profiles[0].picture_url + '/100'}}"
														 class="circle-thumb margin-top-5" alt="dp">
													</div>
													<div style="display: inline-block; margin-left: 5px; margin-top: 3px;">
														<div>
															<div>
																<span class="clickable" style="font-weight: 500" (click)="openProfilePage(comment.peer[0].id)">{{comment.peer[0].profiles[0].first_name}}
																	{{comment.peer[0].profiles[0].last_name}}
																</span>&nbsp;&nbsp;
															</div>
														</div>
														<div class="">
															<span class="lighterText">{{comment.createdAt |extractTime:'Do MMMM, YYYY'}}</span>
														</div>
													</div>
												</div>
												<div style="margin-top: 10px;" *ngIf="!(replyForm && replyingToCommentId===comment.id)">
													<a href="javascript:void(0);" (click)="createReplyForm(comment)">
														<mat-icon style="top: 5px;">reply</mat-icon> Reply
													</a>
												</div>
												<div class="col-md-11 col-md-offset-1 margin-top-30" *ngIf="replyForm && replyingToCommentId===comment.id"
												 style="margin-left: -25px;">
													<form [formGroup]="replyForm" (ngSubmit)="postReply(comment)">
														<img src="/assets/images/user-placeholder.jpg" alt="A" class="circle-thumb margin-top-5">
														<mat-form-field style="margin-left: 15px; width: 88%;">
															<input matInput type="text" #description2 maxlength="2000" formControlName="description" placeholder="Reply to above comment...">
															<mat-hint align="end">{{description2.value.length}} / 2000</mat-hint>
														</mat-form-field>
														<button [disabled]="!replyForm.valid" mat-raised-button class="pull-right margin-top-20" color="primary">
															<span *ngIf="!busyReply">Post</span>
															<ngx-loading [show]="busyReply"></ngx-loading>
														</button>
													</form>
												</div>
											</div>
											<div class="row" *ngIf="editCommentForm && editCommentForm.value['id']===comment.id">
												<div class="col-md-12">
													<form [formGroup]="editCommentForm" (ngSubmit)="updateComment()">
														<mat-form-field class="full-width margin-top-10">
															<input matInput type="text" #description3 maxlength="2000" formControlName="description" placeholder="Post your thoughts on this course">
															<mat-hint align="end">{{description3.value.length}} / 2000</mat-hint>
														</mat-form-field>
														<mat-checkbox [formControlName]="'isAnnouncement'" *ngIf="userType==='teacher'">Make Announcement</mat-checkbox>
														<button mat-raised-button color="primary" [disabled]="!editCommentForm.valid" class="pull-right">
															<span *ngIf="!busyDiscussion">Update</span>
															<span *ngIf="busyDiscussion"> </span>
															<ngx-loading [show]="busyDiscussion"></ngx-loading>
														</button>
													</form>
												</div>
											</div>
											<div class="row">
												<div class="col-md-11 col-md-offset-1 margin-top-10">
													<div class="row margin-top-20" *ngFor="let reply of comment.replies">
														<div class="row" *ngIf="!editReplyForm || (editReplyForm && editReplyForm.value['id']!==reply.id)">
															<button *ngIf="userType !== 'public'" mat-icon-button [matMenuTriggerFor]="menuReply" style="float: right; margin-right: 15px; margin-top: 15px;">
																<mat-icon style="color: #cccccc;">more_vert</mat-icon>
															</button>
															<mat-menu #menuReply="matMenu">
																<button *ngIf="userType==='participant' && !isMyComment(reply)" mat-menu-item>
																	<mat-icon>flag</mat-icon>
																	<span>Flag</span>
																</button>
																<button *ngIf="userType==='teacher' || isMyComment(reply)" mat-menu-item (click)="deleteReply(reply)">
																	<mat-icon>delete</mat-icon>
																	<span>Delete</span>
																</button>
																<button *ngIf="isMyComment(reply)" mat-menu-item (click)="editReply(reply)">
																	<mat-icon>edit</mat-icon>
																	<span>Edit</span>
																</button>
															</mat-menu>
															<div style="text-align: center; display: inline-block; color: #cccccc; vertical-align: top; margin-right: 25px;margin-top: 10px;  margin-left: -60px;"
															 [ngClass]="{'hasUpvoted': !!hasUpvoted(reply.upvotes)}">
																<mat-icon *ngIf="!hasUpvoted(reply.upvotes)" style="cursor: pointer; font-size: 38px; left: -7px;"
																 (click)="addReplyUpvote(reply)">arrow_drop_up</mat-icon>
																<mat-icon *ngIf="hasUpvoted(reply.upvotes)" style="font-size: 38px; left: -7px;">arrow_drop_up</mat-icon>
																<div>
																	<span *ngIf="reply.upvotes !== undefined">{{reply.upvotes.length}}</span>
																	<span *ngIf="reply.upvotes === undefined">0</span>
																</div>
															</div>
															<div style="width: 90%; display: inline-block;">
																<div class="mat-body-1">
																	<div [innerHTML]="reply.description | linkify "></div>
																</div>
																<div class="" style="margin-top: 10px;" *ngIf="reply.peer && reply.peer.length>0">
																	<div class="clickable" style="float: left; margin-left: 15px;">
																		<img (click)="openProfilePage(reply.peer[0].id)" *ngIf="!reply.peer[0].profiles[0].picture_url" src="/assets/images/user-placeholder.jpg"
																		 alt="A" class="clickable circle-thumb margin-top-5">
																		<img (click)="openProfilePage(reply.peer[0].id)" *ngIf="reply.peer[0].profiles[0].picture_url" src="{{envVariable.apiUrl+ reply.peer[0].profiles[0].picture_url + '/100'}}"
																		 class="clickable circle-thumb margin-top-5" alt="dp">
																	</div>
																	<div style="display: inline-block; margin-left: 5px; margin-top: 3px;">
																		<div>
																			<div>
																				<span class="clickable" style="font-weight: 500" (click)="openProfilePage(reply.peer[0].id)">{{reply.peer[0].profiles[0].first_name}}
																					{{reply.peer[0].profiles[0].last_name}}
																				</span>&nbsp;&nbsp;
																			</div>
																		</div>
																		<div class="">
																			<span class="lighterText">{{reply.createdAt |extractTime:'Do MMMM, YYYY'}}</span>
																		</div>
																	</div>
																</div>
															</div>
														</div>
														<div class="row" *ngIf="editReplyForm && editReplyForm.value['id']===reply.id">
															<form [formGroup]="editReplyForm" (ngSubmit)="updateReply()">
																<img src="/assets/images/user-placeholder.jpg" alt="A" class="circle-thumb margin-top-5">
																<mat-form-field style="margin-left: 15px; width: 88%;">
																	<input matInput type="text" #description4 maxlength="2000" formControlName="description" placeholder="Reply to above comment...">
																	<mat-hint align="end">{{description4.value.length}} / 2000</mat-hint>
																</mat-form-field>
																<button [disabled]="!editReplyForm.valid" mat-raised-button class="pull-right" color="primary">
																	<span *ngIf="!busyReply">update</span>
																	<ngx-loading [show]="busyReply"></ngx-loading>
																</button>
															</form>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="col-xs-12">
											<hr class="margin-top-30">
										</div>
									</div>
								</div>
							</div>
						</div>
						<hr *ngIf="(userType==='teacher' || userType==='participant') && comments !== undefined && comments.length === 0">
						<!--REVIEWS-->
						<div class="loading-container" [hidden]="!loadingReviews && !initialLoad">
							<ngx-loading [show]="true"></ngx-loading>
						</div>
						<div class="row Reviews" *ngIf="reviews !== undefined">
							<div class="col-md-12">
								<div class="row margin-top-20">
									<div class="col-md-12">
										<h3 style="display: inline-block;">Reviews ({{reviews.length}})</h3> &emsp;
										<span style="display: inline-block;">
											<p-rating style="display: inline-flex;" *ngIf="userType==='teacher' || userType==='public' || hasReviewed(reviews)"
											 [ngModel]="userRating" readonly="true" stars="5" [cancel]="false"></p-rating>
											<p-rating style="display: inline-flex;" *ngIf="userType==='participant' && !hasReviewed(reviews)"
											 [(ngModel)]="newUserRating" (onRate)="handleRate($event)" [cancel]="false"></p-rating>
										</span>
									</div>
								</div>
								<div class="row margin-top-20" *ngIf="userType==='participant' && !hasReviewed(reviews)">
									<div class="col-md-12">
										<form [formGroup]="reviewForm" (ngSubmit)="postReview()">
											<mat-form-field class="full-width margin-bottom-10">
												<input matInput #description5 maxlength="2000" formControlName="description" placeholder="Describe your experience with this course">
												<mat-hint align="end">{{description5.value.length}} / 2000</mat-hint>
											</mat-form-field>
											<span matTooltip="Have you given a star rating for this review?" [matTooltipDisabled]="isRatingReceived"
											 class="pull-right">
												<button [disabled]="!isRatingReceived || !reviewForm.valid" mat-raised-button color="primary">
													<span *ngIf="!busyReview">Submit</span>
													<ngx-loading [show]="busyReview"></ngx-loading>
												</button>
											</span>
										</form>
									</div>
								</div>
								<div class="row lighterText" *ngIf="reviews.length === 0">
									<div class="col-md-12">
										<div class="emptySectionText" *ngIf="userType !== 'teacher'">Start by giving stars to this course..</div>
										<div class="emptySectionText" *ngIf="userType === 'teacher'">Awaiting first review from participants of this
											course..</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div *ngFor="let review of reviews;let i=index">
											<div class="row margin-top-20 reviewItem" [hidden]="i>=noOfReviews">
												<div class="col-md-12">
													<div class="row">
														<div class="col-md-12" *ngIf="!editReviewForm || (editReviewForm && editReviewForm.value['id']!==review.id)">
															<div class="row">
																<div style="margin-top: 10px; margin-bottom: 10px;" class="">
																	<button *ngIf="userType !== 'public'" mat-icon-button [matMenuTriggerFor]="menuReply" style="float: right; margin-right: 15px; margin-top: 15px;">
																		<mat-icon style="color: #cccccc;">more_vert</mat-icon>
																	</button>
																	<mat-menu #menuReply="matMenu">
																		<button *ngIf="userType==='participant' && !isMyReview(review)" mat-menu-item>
																			<mat-icon>flag</mat-icon>
																			<span>Flag</span>
																		</button>
																		<button *ngIf="userType==='teacher' || isMyReview(review)" mat-menu-item (click)="deleteReview(review)">
																			<mat-icon>delete</mat-icon>
																			<span>Delete</span>
																		</button>
																		<button *ngIf="isMyReview(review)" mat-menu-item (click)="editReview(review)">
																			<mat-icon>edit</mat-icon>
																			<span>Edit</span>
																		</button>
																	</mat-menu>
																	<div class="clickable" style="float: left;">
																		<img (click)="openProfilePage(review.peer[0].id)" *ngIf="!review.peer || !review.peer[0].profiles[0].picture_url"
																		 src="/assets/images/user-placeholder.jpg" alt="A" class="clickable circle-thumb margin-top-5"
																		 (error)="_collectionService.imgErrorHandler($event)" style="margin-left: 10px;">
																		<img (click)="openProfilePage(review.peer[0].id)" *ngIf=" review.peer && review.peer[0].profiles[0].picture_url"
																		 src="{{envVariable.apiUrl+ review.peer[0].profiles[0].picture_url + '/100'}}" class="clickable circle-thumb margin-top-5"
																		 alt="dp" (error)="_collectionService.imgErrorHandler($event)" style="margin-left: 10px;">
																	</div>
																	<div style="display: inline-block; margin-left: 5px; margin-top: 3px;">
																		<div>
																			<div>
																				<span class="clickable" style="font-weight: 500" (click)="openProfilePage(review.peer[0].id)">{{review.peer[0].profiles[0].first_name
																					+ ' ' + review.peer[0].profiles[0].last_name}}</span>&nbsp;&nbsp;
																			</div>
																		</div>
																		<div class="">
																			<span class="lighterText">{{review.createdAt | extractTime:'Do MMMM, YYYY'}}</span>
																		</div>
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-md-12">
																	{{review.description}}
																</div>
															</div>
															<br>
														</div>
													</div>
													<div class="row" *ngIf="editReviewForm && editReviewForm.value['id']===review.id">
														<div class="col-md-12">
															New Rating
															<p-rating style="display: inline-flex;" [(ngModel)]="newUserRating" (onRate)="updateRating($event)"
															 [cancel]="false"></p-rating>
															<form [formGroup]="editReviewForm" (ngSubmit)="updateReview()">
																<mat-form-field class="full-width">
																	<input matInput #description6 maxlength="2000" formControlName="description" placeholder="Review this course">
																	<mat-hint align="end">{{description6.value.length}} / 2000</mat-hint>
																</mat-form-field>
																<button [disabled]="!editReviewForm.valid" mat-raised-button color="primary">
																	<span *ngIf="!busyReview">Submit</span>
																	<ngx-loading [show]="busyReview"></ngx-loading>
																</button>
															</form>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="row" *ngIf="reviews && reviews.length>3">
											<div class="col-md-12 margin-top-20" style="text-align: center">
												<a [hidden]="noOfReviews!==3" class="clickable" (click)="toggleReviews()" style="cursor: pointer;">See all
													{{reviews.length}}
													reviews
												</a>
												<a [hidden]="noOfReviews===3" class="clickable" (click)="toggleReviews()" style="cursor: pointer;">See
													fewer
													reviews
												</a>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<hr class="margin-top-40" *ngIf="reviews !== undefined">
						<!--REQUIREMENTS-->
						<div class="row Eligibility margin-top-40" *ngIf="userType==='teacher' || userType === 'participant'">
							<div class="col-md-12">
								<div class="row">
									<div class="col-md-12">
										<div class="row">
											<div class="col-xs-4">
												<h3>Need to know</h3>
											</div>
											<div class="col-xs-8 margin-top-8">
												{{class.difficultyLevel | titlecase}}
												<div class="mat-caption pre-wrapped" [innerHTML]="class.notes | linkify "></div>
											</div>
										</div>
										<div class="row margin-top-20">
											<div class="col-xs-4">
												<h3>Cancellation policy</h3>
											</div>
											<div class="col-xs-8 margin-top-10">
												<p>Get a full refund if you cancel within {{class.cancellationPolicy}} of signing up.</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="margin-top-70"></div>
						<!--<hr class="margin-top-70" *ngIf="userType==='teacher' || userType === 'participant'">-->
					</div>

					<!--RIGHT SIDEBAR-->
					<div class="col-md-4 col-md-offset-1 right-content">
						<div *ngIf="userType==='participant'">
							<h3 class="margin-bottom-20">Taught By</h3>
							<div class="row">
								<div class="col-xs-7">
									<div class="clickable" style="display: inline-block; position: relative; top: 2px; vertical-align: top;">
										<app-profile-popup [peer]="class.owners[0]"></app-profile-popup>
									</div>
									<div style="display: inline-block; margin-left: 10px; width: 85%;">
										<div>
											<div class="clickable" (click)="openProfilePage(class.owners[0].id)">
												<span *ngIf="class.owners[0].profiles[0].first_name !== undefined">
													{{class.owners[0].profiles[0].first_name | ucwords }} {{class.owners[0].profiles[0].last_name | ucwords }}
												</span>
												<span *ngIf="class.owners[0].profiles[0].first_name === undefined">
													John Doe
												</span>
											</div>
											<div class="mat-h5" *ngIf="class.owners[0].profiles[0].headline">
												{{class.owners[0].profiles[0].headline}}
											</div>
											<div class="mat-h5" *ngIf="!class.owners[0].profiles[0].headline">
												New user
											</div>
										</div>
									</div>
								</div>
								<div class="col-xs-5">
									<button mat-button class="mat-border-button" (click)="openMessageDialog(class.owners[0])">Message</button>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<p>
										<span class="pre-wrapped">{{class.aboutHost | shorten: maxLength : '... '}}</span>
										<span *ngIf="class.aboutHost && class.aboutHost.length > maxLength" (click)="showAll(class.aboutHost.length)"
										 style="color:#33bd9e" class="clickable">read more</span>
										<span *ngIf="class.aboutHost && class.aboutHost.length>140 && class.aboutHost.length <= maxLength" (click)="showAll(class.aboutHost.length)"
										 style="color:#33bd9e" class="clickable">show less</span>
									</p>
								</div>
							</div>
							<hr class="margin-top-10 margin-bottom-10">
						</div>
						<div *ngIf="(userType==='teacher' || userType==='participant') && calendarId !== undefined">
							<h3 class="margin-bottom-20">Participants ({{participants ? participants.length : '0'}})</h3>
							<div>
								<div class="loading-container" [hidden]="!loadingParticipants">
									<ngx-loading [show]="true"></ngx-loading>
								</div>
								<div>
									<div class="row" *ngIf="participants.length === 0">
										<div class="col-md-12">
											<div class="clickable emptySectionText" (click)="openShareDialog()">Invite participants to this cohort?</div>
										</div>
									</div>
								</div>
								<div *ngFor="let participant of participants; let i=index">
									<div class="row" *ngIf="participant.profiles && i<4">
										<div class="col-md-2 vcenter clickable">
											<app-profile-popup [peer]="participant"></app-profile-popup>
										</div>
										<div class="col-md-9 vcenter clickable" (click)="openProfilePage(participant.id)">
											{{participant.profiles[0].first_name +' '+participant.profiles[0].last_name }}
											<br>
											<span *ngIf="participant.profiles[0].headline" style="font-weight: 300;" class="mat-caption lightText">{{participant.profiles[0].headline}}</span>
										</div>
									</div>
								</div>
								<div>
									<div class="row">
										<div class="col-md-12 margin-top-20 margin-bottom-40">
											<a (click)="viewParticipants()" style="cursor: pointer;" *ngIf="participants.length > 0"> View all
												participants
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div *ngIf="(userType==='teacher' || userType==='participant') && calendarId === undefined">
							<h3 class="margin-bottom-20">All Participants ({{allParticipants ? allParticipants.length : '0'}})</h3>
							<div>
								<div class="loading-container" [hidden]="!loadingParticipants">
									<ngx-loading [show]="true"></ngx-loading>
								</div>
								<div *ngFor="let participant of allParticipants; let i=index">
									<div class="row margin-bottom-10" *ngIf="participant.profiles && i<4">
										<div class="col-md-2 vcenter clickable">
											<app-profile-popup [peer]="participant"></app-profile-popup>
										</div>
										<div class="col-md-9 vcenter clickable" (click)="openProfilePage(participant.id)">
											{{participant.profiles[0].first_name +' '+participant.profiles[0].last_name }}&emsp;
											<br>
											<span *ngIf="participant.profiles[0].headline" style="font-weight: 300;" class="lightText">{{participant.profiles[0].headline}}</span>
										</div>
									</div>
								</div>
								<div>
									<div class="row">
										<div class="col-md-12 margin-top-20">
											<a (click)="viewAllParticipants()" style="cursor: pointer;" *ngIf="allParticipants.length > 0"> View all
												participants
											</a>
										</div>
									</div>
								</div>
								<div>
									<div class="row">
										<div class="col-md-12">
											<div class="emptySectionText">
												Select one cohort to view participants signed up for that batch.
												<br>
												<br>
												<button mat-button class="mat-border-button" (click)="changeDates()">Select cohort</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div *ngIf="userType==='teacher' && class.isApproved && assessmentRules !== undefined">
							<hr class="margin-top-30 margin-bottom-30">
							<div>
								<h3 style="display: inline-block;">Assessment Rules</h3>
								<!-- <span (click)="editCalendar()" class="pull-right clickable" style="cursor: pointer;">
										<mat-icon style="font-size: 1rem; top: 15px;">edit</mat-icon>
									</span> -->
								<!-- <br> -->
								<div class="row padding-top-20" *ngFor="let assessment_rule of assessmentRules">
									<div class="col-xs-4">
										For {{assessment_rule.value | titlecase}}
									</div>
									<div class="col-xs-8">
										student gets &nbsp;
										<i class="fab fa-ethereum"></i> &nbsp;
										<b>{{getGyanForRule(assessment_rule.gyan, class.academicGyan)}} Gyan</b>
									</div>
								</div>
							</div>
							<br>
						</div>
						<div *ngIf="userType==='teacher' && class.isApproved">
							<hr class="margin-top-30 margin-bottom-30" *ngIf="userType==='teacher'">
							<div>
								<h3 style="display: inline-block;">Class Batches</h3>
								<span (click)="editCalendar()" class="pull-right clickable" style="cursor: pointer;">
									<mat-icon style="font-size: 1rem; top: 15px;">edit</mat-icon>
								</span>
								<br>
								<span class="text-muted h6">{{class.calendars.length}} Cohorts</span>
							</div>
							<br>
							<div class="border-calendar calendar">
								<div class="flex flexContainer" style="margin-bottom:10px">
									<div class="col-md-8">
										<h3 class="calendarTitle">{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
									</div>
									<span class="flex"></span>
									<div class="prevNext" style="margin-top: -5px">
										<button mat-button class="mat-icon-button" type="button" mwlCalendarPreviousView [view]="view" [(viewDate)]="viewDate">
											<mat-icon class="" aria-hidden="true">chevron_left</mat-icon>
										</button>
										<button mat-button class="mat-icon-button" type="button" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate">
											<mat-icon class="" aria-hidden="true">chevron_right</mat-icon>
										</button>
									</div>
								</div>
								<div [ngSwitch]="view">
									<mwl-calendar-month-view *ngSwitchCase="'month'" [viewDate]="viewDate" [events]="events" [refresh]="refresh"
									 (dayClicked)="dayClicked($event.day)">
									</mwl-calendar-month-view>
								</div>
							</div>
							<div [ngClass]="{'clickedDate' : true, 'displayNone' : !dateClicked, 'displayBlock': dateClicked}">
								<div style="margin: 15px 0px;" [ngClass]="{'displayFlex': dateClicked}">
									<span class="cal-day-badge"></span>
									<span>
									{{clickedCohort | titlecase}} ({{clickedCohortStartDate | date:'d MMM' }} - {{clickedCohortEndDate | date:'d MMM' }})
									</span>
								</div>
								<div class="margin-top-10 margin-bottom-10">
									<span>{{clickedDate | date:'EEEE, MMM d'}}</span>
								</div>
								<div *ngIf="objectKeys(eventsForTheDay).length === 0">
									<div class="displayFlex event">
										<span>No events on this date</span>
									</div>
									<div class="margin-top-20 margin-bottom-20">
										<button mat-button (click)="viewDetails(clickedCohortId)" class="mat-border-button">View details of
											{{clickedCohort}}</button>
									</div>
								</div>
								<div *ngFor="let key of objectKeys(eventsForTheDay);">
									<div class="displayFlex event clickable" *ngFor="let event of eventsForTheDay[key]" (click)="openEventDialog(clickedCohortId, event.id)"
									 style="cursor: pointer;">
										<span>{{ event.start | date:'hh:mm' }}</span>
										<span>
											<b>{{ event.start | date:'a' | lowercase}}</b>
										</span>
										&emsp;
										<span>{{ parseTitle(event.title)[0] | titlecase }}</span>
									</div>
									<div class="margin-top-20 margin-bottom-20">
										<button mat-button (click)="viewDetails(key)" class="mat-border-button">View details of {{clickedCohort}}</button>
									</div>
								</div>
							</div>
						</div>
						<div class="row" *ngIf="userType==='public'" style="margin-top: -85px;">
							<div class="col-md-12">
								<!--COVER IMAGE-->
								<div class="row">
									<div class="col-md-12">
										<div style="width: 340px; height: auto;" *ngIf="carouselImages">
											<ngu-carousel [inputs]="carouselBanner">
												<ngu-item NguCarouselItem class="bannerStyle" *ngFor="let imageUrl of carouselImages">
													<div class="row">
														<div class="col-md-12">
															<img src="{{imageUrl + '/500'}}">
														</div>
													</div>
												</ngu-item>
												<img NguCarouselPrev src="/assets/images/images_landing/arrow-left.png" class="arrow arrow-left" />
												<img NguCarouselNext src="/assets/images/images_landing/arrow-right.png" class="arrow arrow-right" />
											</ngu-carousel>
										</div>
									</div>
								</div>
								<!--HEADLINE-->
								<div class="row">
									<div class="col-md-12">
										<h3>
											{{class.headline | titlecase}}
										</h3>
									</div>
								</div>
								<hr style="margin-bottom: 10px;">
								<!--PRICE SECTION-->
								<div class="row">
									<div class="col-xs-8">
										<div class="row">
											<div class="col-md-12">
												<h2 style="display: inline-block; margin-bottom: -1px;">{{class.price | convertCurrency: class.currency |async}}
												</h2>&nbsp; per person
												<br />
												<p-rating [ngModel]="userRating" readonly="true" stars="5" [cancel]="false" style="font-size: 13px; float: left;"></p-rating>
												&nbsp;&nbsp;
												<span *ngIf="reviews" style="font-weight: 400; float: left; margin-left: 10px;">{{reviews.length}} reviews</span>
												<span *ngIf="!reviews" style="font-weight: 400; float: left; margin-left: 10px;">0 reviews</span>
											</div>
											<div class="col-md-12">
												<span matTooltip="Earn up to {{class.academicGyan + class.nonAcademicGyan}} Gyan from this class" style="font-weight: 700; vertical-align: middle;">
													Earn
													<i class="fab fa-ethereum lightText"></i> {{class.academicGyan + class.nonAcademicGyan}}
												</span>
												<!--<mat-icon style="font-size: 5px; top: 0px; height: 20px; width: 7px;margin-left: 3px;">fiber_manual_record</mat-icon>
												<span matTooltip="KARMA required to be burned for participation" style="font-weight: 700; vertical-align: middle;">
													<i class="fas fa-fire lightText"></i> {{(class.academicGyan + class.nonAcademicGyan) | convertCrypto : 'GYAN' : 'KARMA' | async | shortNumber}}
												</span>
												<mat-icon style="font-size: 5px; top: 0px; height: 20px; width: 7px;margin-left: 3px;">fiber_manual_record</mat-icon>
												<span class="mat-border-button gyanBubbleCard" style="margin-left: 0px !important;" matTooltip="Pending payout {{getPredictedGyanEarn(class) | convertCurrency : 'GYAN' | async}} ({{getPredictedGyanEarn(class)}} GYAN) in 7 days">
													<div style="font-size: 11px;">{{getPredictedGyanEarn(class) | convertCurrency : 'GYAN' | async}}</div>
												</span>-->
											</div>
										</div>
									</div>
									<div class="col-xs-4" style="padding-top: 9px;">
										<span>
											<button mat-raised-button (click)="selectJoiningDates()" color="primary">Enroll Now</button>
										</span>
										<!--<span *ngIf="userId === undefined || userId.length <= 5" matTooltip="Create an account now to join this class">
											<button mat-raised-button color="primary" [disabled]="true">See Dates</button>
										</span>-->
									</div>
								</div>
							</div>
						</div>
						<div *ngIf="class.isApproved && certificateHTML !== undefined && certificateHTML.length > 10">
							<hr class="margin-top-30 margin-bottom-30">
							<div>
								<h3 style="display: inline-block;">Smart Certificate</h3>
								<div class="margin-top-20">
									You will receive this Smart Certificate immediately on completing this course.
								</div>
								<!-- <br> -->
								<div class="row padding-top-20">
									<div class="col-xs-12">
										<ngx-loading [show]="loadingCertificate"></ngx-loading>
										<div style="border: 1px solid #ccc; padding: 20px; border-radius: 4px;">
											<div #certificateDomHTML [innerHTML]="certificateHTML | safe: 'html'"></div>
										</div>
									</div>
								</div>
								<div class="margin-top-20 mat-caption lightText">
									This certificate is issued on the blockchain & can be instantly verified by anyone.
								</div>
							</div>
							<br>
						</div>
						<hr class="margin-top-10 margin-bottom-10">
						<div class="row padding-top-20 padding-bottom-20" *ngIf="userType === 'public'">
							<div class="col-xs-12">
								<h3>Want to know more?</h3>
								<div class="lightText">Drop us a message and we'll get back immediately.</div>
							</div>
							<div class="col-xs-12 margin-top-30">
								<form [formGroup]="contactUsForm">
									<div class="row">
										<div class="col-xs-12">
											<mat-form-field class="pb-block">
												<input matInput type="text" placeholder="Name" formControlName="first_name">
											</mat-form-field>
										</div>
										<!--<div class="col-xs-12">
											<mat-form-field class="pb-block">
												<input matInput type="text" placeholder="Last Name" formControlName="last_name">
											</mat-form-field>
										</div>-->
										<div class="col-xs-12">
											<mat-form-field class="pb-block ">
												<input matInput type="text" placeholder="Email" formControlName="email">
											</mat-form-field>
										</div>
										<div class="col-xs-12">
											<mat-form-field class="pb-block">
												<textarea matInput rows="1" matTextareaAutosize placeholder="Message" formControlName="message"></textarea>
											</mat-form-field>
										</div>
										<div class="col-xs-6">
											<mat-form-field class="pb-block">
												<input matInput type="number" placeholder="Phone Number" formControlName="phone">
											</mat-form-field>
										</div>
										<div class="col-xs-6">
											<button mat-button color="primary" class="mat-border-button pb-block" type="submit" (click)="createGuestContacts()"
											 style="float: right;" [disabled]="!contactUsForm.valid">
												<span>Submit</span>
											</button>
										</div>
									</div>
								</form>
							</div>
						</div>
						<hr class="margin-top-10 margin-bottom-10" *ngIf="userType === 'public'">
						<div class="row" style="color: #777777">
							<div class="col-xs-4" style="cursor: pointer;">
								<a (click)="openShareDialog()">Invite friends</a>
							</div>
							<div class="col-xs-4 clickable" (click)="saveBookmark()" style="cursor: pointer;">
								<ngx-loading [show]="bookmarking"></ngx-loading>
								<span [hidden]="bookmarking">
									<mat-icon [ngClass]="{'hasBookmarked': hasBookmarked}" style="font-size: 1rem; top: 2px;">bookmark</mat-icon>
									<span *ngIf="!hasBookmarked">Save</span>
									<span *ngIf="hasBookmarked">Saved</span>
								</span>
							</div>
							<div class="col-xs-4" style="text-align: right; font-size: 18px;">
								<a shareButton="facebook" href="javascript:;" [url]="inviteLink">
									<i class="fab fa-facebook-square"></i>
								</a>&nbsp;
								<a shareButton="linkedin" href="javascript:;" [url]="inviteLink">
									<i class="fab fa-linkedin"></i>
								</a>&nbsp;
								<a shareButton="twitter" href="javascript:;" [url]="inviteLink">
									<i class="fab fa-twitter-square"></i>
								</a>
							</div>
						</div>
						<hr class="margin-top-10 margin-bottom-10">
						<div class="row">
							<div class="col-xs-12">
								<i class="fa fa-headphones"></i>&nbsp;&nbsp; 24x7 support at
								<a class="pull-right" href="tel:+917021517299">+91 7021-517-299</a>
							</div>
						</div>
					</div>
				</div>
				<hr class="margin-bottom-60" *ngIf="userType === 'participant' && recommendations.collections && recommendations.collections.length > 0">
				<!--SIMILAR CLASSES-->
				<div class="row class-suggestions" *ngIf="userType!=='teacher'">
					<div class="col-md-12">
						<div class="row margin-bottom-20">
							<div class="col-md-5">
								<h3>Similar Online Courses</h3>
							</div>
							<div class="col-md-2 pull-right" style="text-align: right">
								<a [routerLink]="'/home/classes'">
									<span class="mat-body-1">
										See all
										<mat-icon class="rightChevron" style="position: relative; top: 2px; font-size: 14px; width: 10px;">chevron_right</mat-icon>
									</span>
								</a>
							</div>
						</div>
						<div class="loading-container" [hidden]="!loadingSimilarClasses">
							<ngx-loading [show]="true"></ngx-loading>
						</div>
						<div *ngIf="!loadingSimilarClasses" class="row feed-horizontal margin-bottom-40" style="padding: 0px 7px;">
							<div *ngFor="let class of recommendations.collections; let i = index;">
								<app-class-card *ngIf="i < 5" [class]="class" (refresh)="onClassRefresh($event)"></app-class-card>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="bottomButton" *ngIf="userType === 'public' && class">
		<div class="col-xs-8" style="text-align: left;">
			<div class="row">
				<div class="col-md-12">
					<h2 style="display: inline-block; margin-bottom: -1px;">{{class.price | convertCurrency: class.currency |async}}</h2>
					&nbsp; per person
					<br />
					<p-rating [ngModel]="userRating" readonly="true" stars="5" [cancel]="false" [iconOffStyle]="{'color': '#fff'}"
					 style="font-size: 13px; float: left;"></p-rating>
					&nbsp;&nbsp;
					<span *ngIf="reviews" style="font-weight: 400; float: left; margin-left: 10px;">{{reviews.length}} reviews</span>
					<span *ngIf="!reviews" style="font-weight: 400; float: left; margin-left: 10px;">0 reviews</span>
				</div>
				<div class="col-md-12">
					<span matTooltip="Earn up to {{class.academicGyan + class.nonAcademicGyan}} Gyan from this class" style="font-weight: 700; vertical-align: middle;">
						Earn
						<i class="fab fa-ethereum"></i> {{class.academicGyan + class.nonAcademicGyan}}
					</span>
					<!--<mat-icon style="font-size: 5px; top: 0px; height: 20px; width: 7px;margin-left: 3px;">fiber_manual_record</mat-icon>
					<span matTooltip="KARMA required to be burned for participation" style="font-weight: 700; vertical-align: middle;">
						<i class="fas fa-fire"></i> {{(class.academicGyan + class.nonAcademicGyan) | convertCrypto : 'GYAN' : 'KARMA' | async | shortNumber}}
					</span>
					<mat-icon style="font-size: 5px; top: 0px; height: 20px; width: 7px;margin-left: 3px;">fiber_manual_record</mat-icon>
					<span class="mat-border-button gyanBubbleCard" style="margin-left: 0px !important;" matTooltip="Pending payout {{getPredictedGyanEarn(class) | convertCurrency : 'GYAN' | async}} ({{getPredictedGyanEarn(class)}} GYAN) in 7 days">
						<div style="font-size: 11px;">{{getPredictedGyanEarn(class) | convertCurrency : 'GYAN' | async}}</div>
					</span>-->
				</div>
			</div>
		</div>
		<div class="col-xs-4" style="padding-top: 9px;">
			<span>
				<button mat-raised-button (click)="selectJoiningDates()" color="primary">Enroll Now</button>
			</span>
			<!--<span *ngIf="userId === undefined || userId.length <= 5" matTooltip="Create an account now to join this class">
				<button mat-raised-button color="primary" [disabled]="true">See Dates</button>
			</span>-->
		</div>
	</div>
	<div class="row" *ngIf="!class && !loadingClass">
		<div class="col-xs-12 center margin-top-100 lightText">
			<div class="mat-display-2">this online course was not found on our servers</div>
		</div>
	</div>
</div>
